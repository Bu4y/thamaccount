<div class="container">
    <div class="row" style="margin-bottom: 15px;">
        <div class="col-12 center">
            <div class="radio">
                <label>
                    <input type="radio" [(ngModel)]="glType" value="month"> รายเดือน
                </label>
                <label>
                    <input type="radio" [(ngModel)]="glType" value="year"> รายปี
                </label>
            </div>
        </div>
    </div>
    <div class="row" style="margin-bottom: 15px;">
        <div class="col-4 center"></div>
        <div class="col-4 center">
            <div *ngIf="glType === 'month'">
                <input class="form-control" type="month" [(ngModel)]="month">
            </div>
            <div *ngIf="glType === 'year'">
                <input class="form-control" type="number" [(ngModel)]="year" min="1997" max="3000">
            </div>
        </div>
        <div class="col-4 center"></div>
    </div>
    <div class="row" style="margin-bottom: 15px;">
        <div class="col-12 center">
            <div>
                <button type="button" class="btn btn-primary" (click)="genGlReport()">ทำงบ</button>
                <button type="button" class="btn btn-default">ปิดงบ</button>
            </div>
        </div>
    </div>

    <ngb-tabset *ngIf="glReport.type">
        <!-- ..dailyTab.. -->
        <ngb-tab title="สุมดบัญชีรายวัน">
            <ng-template ngbTabContent>
                <div *ngIf="glReport.daily.transaction.length > 0">
                    <div class="center time-now">
                        <br>
                        <p>{{glReport.daily.date | date:'dd/MM/yy'}}</p>
                        <p>{{glReport.daily.date | date:'HH:mm:ss'}}</p>
                    </div>
                    <div class="center">
                        <br>
                        <p>{{glReport.daily.company}}</p>
                        <p>{{glReport.daily.title}}</p>
                        <p>ตั้งแต่วันที่ {{glReport.daily.startdate | date:'dd/MM/yy'}} จนถึงวันที่ {{glReport.daily.enddate
                            | date:'dd/MM/yy'}}
                        </p>
                        <br>
                    </div>
                    <div class="scroll_ ">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th class="center">วันที่</th>
                                    <th class="center">เลขเอกสาร</th>
                                    <th class="center">รายการ</th>
                                    <th class="center">รหัสบัญชี</th>
                                    <th class="center">เช็ค/ใบสำคัญ</th>
                                    <th class="center">ลงวันที่</th>
                                    <th class="center">เดบิต</th>
                                    <th class="center">เครดิด</th>
                                </tr>
                            </thead>
                            <tbody>

                                <tr *ngFor="let transaction of glReport.daily.transaction">
                                    <td class="padding-top">{{transaction.docdate | date:'dd/MM/yy'}}</td>
                                    <td class="padding-top">{{transaction.docno}}</td>
                                    <td>
                                        <div *ngFor="let list of transaction.list">
                                            <div *ngIf="list.debit>0">
                                                <p class="debit"> {{list.accountname}}</p>
                                            </div>
                                            <div *ngIf="list.credit>0">
                                                <p class="credit"> {{list.accountname}}</p>
                                            </div>
                                        </div>
                                        <div *ngIf="transaction.remark !== '' ">
                                            <p class="reason"> ({{transaction.remark}})</p>
                                        </div>

                                    </td>
                                    <td class="left">
                                        <div *ngFor="let list of transaction.list">


                                            <p>{{list.accountno}}</p>

                                        </div>
                                    </td>
                                    <td>
                                        <div *ngFor="let  document of transaction.list">
                                            {{document.document}}
                                        </div>
                                    </td>
                                    <td>
                                        <div *ngFor="let  timestamp of transaction.list">
                                            {{timestamp.timestamp}}
                                        </div>
                                    </td>
                                    <td class="right">
                                        <div *ngFor="let list of transaction.list">
                                            <div *ngIf="list.debit>0">
                                                <p>{{list.debit | number:'.2'}}</p>
                                            </div>
                                            <div *ngIf="list.credit>0">
                                                <p>
                                                    <br>
                                                </p>
                                            </div>
                                        </div>

                                    </td>
                                    <td class="right">
                                        <div *ngFor="let list of transaction.list">
                                            <div *ngIf="list.debit>0">
                                                <p>
                                                    <br>
                                                </p>
                                            </div>
                                            <div *ngIf="list.credit>0">
                                                <p>{{list.credit | number:'.2'}}</p>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <br>
                        <div class="col-md-12 center">
                            *** จบรายงาน ***
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 center" *ngIf="glReport.daily.transaction.length === 0">
                        <br>
                        <p>*** ไม่พบข้อมูล สมุดรายวันทั่วไป***</p>
                    </div>
                </div>
            </ng-template>
        </ngb-tab>
        <!-- End ..dailyTab.. -->

        <!-- ..acceachTab.. -->
        <ngb-tab title="บัญชีแยกประเภท">
            <ng-template ngbTabContent>
                <div *ngIf="glReport.acceach.length > 0">
                    <div *ngFor="let acceach of glReport.acceach">
                        <div class="row">
                            <div class="col-md-4">
                                <br>
                                <p>{{acceach.date | date:'dd/MM/yy'}}</p>
                                <p>{{acceach.date | date:'HH:mm:ss'}}</p>
                            </div>
                            <div class="col-md-4 center">
                                <br>
                                <p>{{acceach.company}}</p>
                                <p>{{acceach.title}}</p>
                                <p>ตั้งแต่วันที่ {{acceach.startdate | date:'dd/MM/yy'}} จนถึงวันที่ {{acceach.enddate | date:'dd/MM/yy'}}
                                </p>
                            </div>
                            <div class="col-md-4 right accoutno">
                                รหัสบัญชี {{acceach.accoutno}}
                            </div>
                        </div>
                        <div class="scroll_ ">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th class="center">วันที่</th>
                                        <th class="center">เลขเอกสาร</th>
                                        <th class="center">ชื่อบัญชีอ้างอิง</th>
                                        <th class="center">รหัสบัญชี</th>
                                        <th class="center">เช็ค/ใบสำคัญ</th>
                                        <th class="center">ลงวันที่</th>
                                        <th class="center">เดบิต</th>
                                        <th class="center">เครดิด</th>
                                        <th class="center">คำอธิบาย</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="padding-top">{{acceach.bringforward.docdate | date:'dd/MM/yy'}}</td>
                                        <td class="padding-top">
                                            {{acceach.bringforward.docno}}
                                        </td>
                                        <td>

                                            <p>{{acceach.bringforward.accountname}}</p>

                                        </td>
                                        <td>{{acceach.bringforward.accountno}}</td>
                                        <td>{{acceach.bringforward.document}}</td>
                                        <td>{{acceach.bringforward.timestamp}}</td>
                                        <td class="right">
                                            <div *ngIf="acceach.bringforward.debit>0">
                                                <p>{{acceach.bringforward.debit | number:'.2'}}</p>
                                            </div>
                                            <div *ngIf="acceach.bringforward.credit>0">
                                                <br>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngIf="acceach.bringforward.debit>0">
                                                <br>
                                            </div>
                                            <div *ngIf="acceach.bringforward.credit>0">
                                                <p>{{acceach.bringforward.credit | number:'.2'}}</p>
                                            </div>
                                        </td>
                                        <td>{{acceach.bringforward.description}}</td>
                                    </tr>

                                    <!--  Data acceach -->
                                    <tr *ngFor="let transaction of acceach.transaction">
                                        <td class="padding-top">{{transaction.docdate | date:'dd/MM/yy'}}</td>
                                        <td class="padding-docno">

                                            <div *ngFor="let list of transaction.list">
                                                <p>{{list.docno}}</p>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let list of transaction.list">
                                                <p>{{list.accountname}}</p>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let list of transaction.list">
                                                <p>{{list.accountno}}</p>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let list of transaction.list">
                                                <p>{{list.document}}</p>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let list of transaction.list">
                                                <p>{{list.timestamp}}</p>
                                            </div>
                                        </td>
                                        <td class="right">
                                            <div *ngFor="let list of transaction.list">
                                                <div *ngIf="list.debit>0">
                                                    <p>{{list.debit | number:'.2'}}</p>
                                                </div>
                                                <div *ngIf="list.credit>0">
                                                    <br>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let list of transaction.list">
                                                <div *ngIf="list.debit>0">
                                                    <br>
                                                </div>
                                                <div *ngIf="list.credit>0">
                                                    <p>{{list.credit | number:'.2'}}</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let list of transaction.list">
                                                <p>{{list.description}}</p>
                                            </div>
                                        </td>
                                    </tr>
                                    <!-- End Data acceach -->

                                    <tr>
                                        <td class="padding-top">{{acceach.carryforward.docdate | date:'dd/MM/yy'}}</td>
                                        <td class="padding-top">
                                            {{acceach.carryforward.docno}}
                                        </td>
                                        <td>
                                            <div>
                                                <p>{{acceach.carryforward.accountname}}</p>
                                            </div>
                                        </td>
                                        <td>{{acceach.carryforward.accountno}}</td>
                                        <td>{{acceach.carryforward.document}}</td>
                                        <td>{{acceach.carryforward.timestamp}}</td>
                                        <td class="right">
                                            <div *ngIf="acceach.carryforward.debit>0">
                                                <p>{{acceach.carryforward.debit | number:'.2'}}</p>
                                            </div>
                                            <div *ngIf="acceach.carryforward.credit>0">
                                                <br>
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngIf="acceach.carryforward.debit>0">
                                                <br>
                                            </div>
                                            <div *ngIf="acceach.carryforward.credit>0">
                                                <p>{{acceach.carryforward.credit | number:'.2'}}</p>
                                            </div>
                                        </td>
                                        <td>{{acceach.carryforward.description}}</td>
                                    </tr>

                                    <!-- SUM -->
                                    <tr>
                                        <td class="border-no"></td>
                                        <td class="border-no"></td>
                                        <td class="border-no"></td>
                                        <td class="border-no"></td>
                                        <td class="border-no"></td>
                                        <td class="border-no"></td>
                                        <td class="border-sum">
                                            {{acceach.current.debit | number: '.2'}}
                                        </td>
                                        <td class="border-sum"> {{acceach.current.credit | number: '.2'}}</td>
                                        <td class="border-no">
                                        </td>
                                    </tr>
                                    <!-- END SUM -->

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 center" *ngIf="glReport.acceach.length === 0">
                        <br>
                        <p>*** ไม่พบข้อมูล บัญชีแยกประเภท***</p>
                    </div>
                </div>
            </ng-template>
        </ngb-tab>
        <!-- End ..acceachTab.. -->
        <ngb-tab title="งบกำไรขาดทุน">
            <ng-template ngbTabContent>
                <div *ngIf="glReport.gain.transaction">
                    <div class="center time-now">
                        <br>
                        <p>{{glReport.gain.date | date:'dd/MM/yy'}}</p>
                        <p>{{glReport.gain.date | date:'HH:mm:ss'}}</p>
                    </div>
                    <div class="center">
                        <br>
                        <p>{{glReport.gain.company}}</p>
                        <p>{{glReport.gain.title}}</p>
                        <p>ตั้งแต่วันที่ {{glReport.gain.startdate | date:'dd/MM/yy'}} จนถึงวันที่ {{glReport.gain.enddate |
                            date:'dd/MM/yy'}}
                        </p>
                    </div>

                    <table class="table" style="border-collapse: unset; min-width: 400px;">
                        <tbody *ngFor="let transaction of glReport.gain.transaction">

                            <tr class="border-no">
                                <td class="border-no" style="width: 80%">{{transaction.accounttype}}</td>
                                <td class="border-no right"></td>
                                <td class="border-no right">

                                    <div *ngIf="transaction.list.length===0">
                                        <p>{{transaction.summary | number:'.2'}}</p>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-no">
                                <td class="border-no " id="acceach-left">
                                    <div *ngFor="let list of transaction.list">
                                        <p>{{list.accountno}}</p>
                                    </div>
                                </td>
                                <td class="border-no right">
                                    <div *ngFor="let list of transaction.list;let i = index" [attr.data-index]="i">
                                        <p>{{list.amount | number:'.2'}}</p>
                                        <div *ngIf="transaction.list.length===i+1">
                                            <p>--------------------</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="border-no right">
                                    <div *ngFor="let list of transaction.list;let i = index" [attr.data-index]="i">
                                        <div *ngIf="transaction.list.length!==i+1">
                                            <br>
                                        </div>

                                        <div *ngIf="transaction.list.length===i+1">
                                            <p>{{transaction.summary | number:'.2'}}</p>
                                            <p>--------------------</p>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-no">
                                <td class="border-no"></td>
                                <td class="border-no right"></td>
                                <td class="border-no right">


                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="row ">
                        <div class="col-md-12 center">
                            *** จบรายงาน ***
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 center" *ngIf="!glReport.gain.transaction">
                        <br>
                        <p>*** ไม่พบข้อมูล งบกำไรขาดทุน***</p>
                    </div>
                </div>

            </ng-template>
        </ngb-tab>

        <ngb-tab title="งบดุล">
            <ng-template ngbTabContent>
                <div *ngIf="glReport.balance">
                    <div class="center time-now">
                        <br>
                        <p>{{glReport.balance.date | date:'dd/MM/yy'}}</p>
                        <p>{{glReport.balance.date | date:'HH:mm:ss'}}</p>
                    </div>
                    <div class="center">
                        <br>
                        <p>{{glReport.balance.company}}</p>
                        <p>{{glReport.balance.title}}</p>
                        <p>ตั้งแต่วันที่ {{glReport.balance.startdate | date:'dd/MM/yy'}} จนถึงวันที่ {{glReport.balance.enddate
                            | date:'dd/MM/yy'}}
                        </p>
                    </div>

                    <table class="table" style="border-collapse: unset ; min-width: 400px;">

                        <tr>
                            <td colspan="2" class="center" style="border-top: 1px solid #ffffff;">{{glReport.balance.asset.name}}</td>
                        </tr>
                        <tbody *ngFor="let tran_asset of glReport.balance.asset.transaction">
                            <tr class="border-no">
                                <td class="border-no" style="width: 80%">{{tran_asset.accounttype}}</td>
                                <td class="border-no right"></td>
                                <td class="border-no right">
                                    <div *ngIf="tran_asset.list.length===0">
                                        <p>{{tran_asset.summary | number:'.2'}}</p>
                                        <p>===========</p>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-no">
                                <td class="border-no " id="acceach-left">
                                    <div *ngFor="let list of tran_asset.list">
                                        <p>{{list.accountno}}</p>
                                    </div>
                                </td>
                                <td class="border-no right">
                                    <div *ngFor="let list of tran_asset.list;let i = index" [attr.data-index]="i">
                                        <p>{{list.amount | number:'.2'}}</p>
                                        <div *ngIf="tran_asset.list.length===i+1">
                                            <p>--------------------</p>
                                        </div>
                                    </div>



                                </td>
                                <td class="border-no right">
                                    <div *ngFor="let list of tran_asset.list;let i = index" [attr.data-index]="i">

                                        <div *ngIf="tran_asset.list.length!==i+1">
                                            <br>
                                        </div>
                                        <div *ngIf="tran_asset.list.length===i+1">
                                            <p>{{tran_asset.summary | number:'.2'}}</p>
                                            <p>--------------------</p>
                                        </div>
                                    </div>

                                </td>
                            </tr>
                        </tbody>
                        <!-- ////////////////////////////////////// -->
                        <tr>
                            <td colspan="2" class="center" style="border-top: 1px solid #ffffff;">{{glReport.balance.debt.name}}</td>
                        </tr>
                        <tbody *ngFor="let tran_debt of glReport.balance.debt.transaction">
                            <tr class="border-no">
                                <td class="border-no" style="width: 80%">{{tran_debt.accounttype}}</td>
                                <td class="border-no right"></td>
                                <td class="border-no right">
                                    <div *ngIf="tran_debt.list.length===0">
                                        <p>{{tran_debt.summary | number:'.2'}}</p>
                                        <p>===========</p>
                                    </div>
                                </td>
                            </tr>

                            <tr class="border-no">
                                <td class="border-no " id="acceach-left">
                                    <div *ngFor="let list of tran_debt.list">
                                        <p>{{list.accountno}}</p>
                                    </div>
                                    <div *ngIf="tran_debt.list.length!==0">
                                        <br>
                                        <p>{{tran_debt.sumtrans.accountno}}</p>
                                    </div>
                                </td>
                                <td class="border-no right">
                                    <div *ngFor="let list of tran_debt.list;let i = index" [attr.data-index]="i">
                                        <p>{{list.amount | number:'.2'}}</p>
                                        <div *ngIf="tran_debt.list.length===i+1">
                                            <p>--------------------</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="border-no right">
                                    <div *ngFor="let list of tran_debt.list;let i = index" [attr.data-index]="i">

                                        <div *ngIf="tran_debt.list.length!==i+1">
                                            <br>
                                        </div>
                                        <div *ngIf="tran_debt.list.length===i+1">
                                            <p>{{tran_debt.summary | number:'.2'}}</p>


                                            <p>--------------------</p>
                                        </div>
                                    </div>
                                    <div *ngIf="tran_debt.list.length!==0">

                                        <p>{{tran_debt.sumtrans.amount}}</p>
                                        <p>--------------------</p>
                                    </div>

                                    <!-- <div *ngIf="tran_debt.summary > 0;else other">
                                            ssssss{{tran_debt.summary}}ssssssss
                                        </div>
                                        <div #other>
                                            aaaaaa{{tran_debt.summary}}aaaaaaaa
                                        </div> -->
                                </td>
                            </tr>
                        </tbody>


                    </table>

                    <div class="row ">
                        <div class="col-md-12 center">
                            *** จบรายงาน ***
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 center" *ngIf="!glReport.balance">
                        <br>
                        <p>*** ไม่พบข้อมูล งบดุุล***</p>
                    </div>
                </div>



                <!-- /////////////////////////////////////////////// -->


            </ng-template>
        </ngb-tab>


    </ngb-tabset>


    <!-- Test table -->
    <!-- <table class="table table-bordered" style="margin-bottom: 0px;">
            <thead>
              <tr>
                <th class="center" style="width: 75px">วันที่</th>
                <th class="center" style="width: 100px">เลขเอกสาร</th>
                <th class="center" style="width: 200px">ชื่อบัญชีอ้างอิง</th>
                <th class="center" style="width: 75px">รหัสบัญชี</th>
                <th class="center" style="width: 115px">เช็ค/ใบสำคัญ</th>
                <th class="center" style="width: 60px">ลงวันที่</th>
                <th class="center" style="width: 80px">เดบิต</th>
                <th class="center" style="width: 80px">เครดิด</th>
                <th class="center" style="width: 200px">คำอธิบาย</th>
              </tr>
            </thead>
          </table>

          <table class="table table-bordered border-no" style="margin-top: -4px;margin-left: -2px; ">
            <td class="border-no">
              <tr *ngFor="let transaction of acceach.transaction">
                <td>

                  <tr>
                    <td class="border-no" style="width: 75px">{{transaction.docdate | date:'dd/MM/yy'}}</td>
                  </tr>
                </td>
                <td>
                  <tr class="border-no" *ngFor="let list of transaction.list">
                    <td class="aa" style="width: 100px"> {{list.docno}}</td>
                    <td class="aa" style="width: 230px"> {{list.accountname}}</td>
                    <td class="aa" style="width: 75px"> {{list.accountno}}</td>
                    <td class="aa" style="width: 123px"> {{list.debit}}</td>
                    <td class="aa" style="width: 66px"> {{list.credit}}</td>
                    <td class="aa" style="width: 86px">555555</td>
                    <td class="aa" style="width: 87px">111111</td>
                    <td class="aa" style="width: 211px ;border-width: 0px 0px 0px 0px;"> {{list.description}}{{list.description}}{{list.description}}{{list.description}}{{list.description}}</td>
                  </tr>
                </td>
              </tr>
          </table>

          <table>
              <tr>
                  <td class="border-no"></td>
                  <td class="border-no"></td>
                  <td class="border-no"></td>
                  <td class="border-no"></td>
                  <td class="border-no"></td>
                  <td class="border-no"></td>
                  <td class="border-sum">
                    {{acceach.summarydebit}}
                  </td>
                  <td class="border-sum"> {{acceach.summarycredit}}</td>
                  <td class="border-no">
                  </td>
                </tr>
          </table> -->
    <!-- END Test table -->